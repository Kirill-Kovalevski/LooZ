/* Global Dark Mode — golden-white text, golden titles, dark pastel background.
   Activates when <html> or <body> has class "is-dark". */

:is(html,body).is-dark {
  /* ===== Core tokens ===== */
  --bg-0: #0b111d;         /* page base */
  --bg-1: #0f1422;         /* cards/panels */
  --line: #2f3b55;

  --ink: #f4ecd7;          /* golden-white body text */
  --muted: #c7c0b1;        /* softer text */
  --title: #ffd86b;        /* golden-yellow for titles/headings */
  --accent: #ffd86b;       /* buttons (ok/X), chips highlight */

  /* Header icon glow tokens (parity with view buttons) */
  --nav-accent:    #FFE067;
  --nav-accent-br: #f3c340;
  --nav-accent-ink:#0b1220;
  --nav-glow:      0 14px 36px rgba(255,224,103,.70), 0 0 0 1px rgba(255,239,170,.35) inset;
  --nav-ambient:   radial-gradient(40% 40% at 50% 50%, rgba(255,224,103,.65), transparent 60%);

  /* Month calendar cell bg token (used by pill halo) */
  --month-cell-bg: rgba(10, 18, 28, .92);

  /* ===== Social variables (override light tokens) ===== */
  --soc-ink:#e6edff;
  --soc-soft:#9fb1d8;
  --soc-card:#111827;
  --soc-ring:#2f3d60;
  --soc-pill:#0b1222;
  --soc-glow:0 22px 48px rgba(0,0,0,.55);

  /* FAB palette in dark */
  --fab-1:#ff8677;
  --fab-2:#e0523f;
  --fab-ring:rgba(255,255,255,.12);
}

/* ===== Page background (home shell) ===== */
:is(html,body).is-dark .o-page{
  background:
    linear-gradient(180deg, #0f1422 0%, #0b111d 34%, #0b111d 100%) padding-box,
    radial-gradient(26vmax 20vmax at 12% 55%, color-mix(in oklab, #7cc0a3 18%, transparent) 0%, transparent 70%),
    radial-gradient(28vmax 22vmax at 88% 52%, color-mix(in oklab, #5aa1d8 18%, transparent) 0%, transparent 72%),
    radial-gradient(32vmax 24vmax at 50% 88%, color-mix(in oklab, #6f7fd6 16%, transparent) 0%, transparent 74%),
    radial-gradient(22vmax 18vmax at 22% 92%, color-mix(in oklab, #7cc0a3 12%, transparent) 0%, transparent 76%),
    radial-gradient(22vmax 18vmax at 78% 94%, color-mix(in oklab, #7a8fb1 12%, transparent) 0%, transparent 76%);
}

/* ===== Cards, panels, and common chrome ===== */
:is(html,body).is-dark .group,
:is(html,body).is-dark .p-monthview,
:is(html,body).is-dark .w-rowhead,
:is(html,body).is-dark .c-dock,
:is(html,body).is-dark .c-headbtn,
:is(html,body).is-dark .c-pillnav {
  background: var(--bg-1);
  color: var(--ink);
  border-color: var(--line);
  box-shadow: 0 10px 22px rgba(0,0,0,.45);
}

/* Titles */
:is(html,body).is-dark .group__title,
:is(html,body).is-dark .p-monthtitle,
:is(html,body).is-dark .title { color: var(--title); }

/* Subtle text */
:is(html,body).is-dark .p-weekbar .p-wday,
:is(html,body).is-dark .w-right { color: color-mix(in oklab, var(--ink) 65%, #7c879a); }

/* Primary/Danger CTAs, switches, view buttons – unchanged from your snippet */
:is(html,body).is-dark .p-act--ok,
:is(html,body).is-dark .logout{
  background: linear-gradient(180deg, #2c2300, #1b1500);
  border: 1px solid color-mix(in oklab, var(--title) 60%, #a37c0b);
  color: var(--title);
  box-shadow: 0 6px 14px rgba(0,0,0,.5);
}
:is(html,body).is-dark .p-act--no{
  background: linear-gradient(180deg, #2b1713, #1f0f0d);
  border: 1px solid #cc8b7f;
  color: #ffb8a6;
  box-shadow: 0 6px 14px rgba(0,0,0,.5), 0 0 0 1px rgba(255,186,174,.14) inset;
}
:is(html,body).is-dark .switch .track { background:#1a2436; border-color:#2b3c5c; }
:is(html,body).is-dark .switch input:checked + .track {
  background: color-mix(in oklab, var(--title) 45%, #263a66);
  border-color: color-mix(in oklab, var(--title) 45%, #263a66);
}
:is(html,body).is-dark .seg__btn.is-on,
:is(html,body).is-dark .c-headbtn.is-active{
  background: var(--title);
  border-color: color-mix(in oklab, var(--title) 78%, #f3c340);
  color: #201a00;
  box-shadow: 0 10px 20px rgba(248,210,76,.25), inset 0 1px 0 rgba(255,240,200,.4);
}

/* ===== Month / Week / Profile dark blocks – unchanged from your snippet ===== */
:is(html,body).is-dark body[data-view='month'] .p-monthview{
  background: linear-gradient(180deg, #0b1220 0%, #0b1c28 55%, #0a2022 100%);
  border-color: rgba(126, 160, 200, .20);
  box-shadow: 0 14px 36px rgba(0,0,0,.55);
}
:is(html,body).is-dark body[data-view='month'] .p-monthview::before{
  content:""; position:absolute; inset:-12%; z-index:-1; pointer-events:none;
  background:
    linear-gradient(180deg, rgba(12,18,32,.22), rgba(10,16,28,.18)),
    radial-gradient(40% 40% at 12% 10%,  rgba(64, 200, 173, .22) 0%, rgba(64,200,173,0) 62%),
    radial-gradient(44% 44% at 90% 8%,   rgba(110, 170, 255, .26) 0%, rgba(110,170,255,0) 62%),
    radial-gradient(58% 58% at 102% 58%, rgba(86, 190, 255, .20) 0%, rgba(86,190,255,0) 64%),
    radial-gradient(62% 62% at -2% 100%, rgba(41, 171, 135, .22) 0%, rgba(41,171,135,0) 70%);
}
:is(html,body).is-dark body[data-view='month'] .p-monthview::after{
  content:""; position:absolute; inset:-20%; z-index:-1; pointer-events:none; filter:blur(28px); opacity:.85;
  background:
    radial-gradient(22% 22% at 18% 25%,  rgba(71, 181, 255, .20) 0%, rgba(71,181,255,0) 70%),
    radial-gradient(18% 18% at 78% 22%,  rgba(79, 230, 199, .22) 0%, rgba(79,230,199,0) 70%),
    radial-gradient(24% 24% at 78% 78%,  rgba(84, 160, 255, .18) 0%, rgba(84,160,255,0) 70%),
    radial-gradient(20% 20% at 22% 82%,  rgba(42, 186, 150, .20) 0%, rgba(42,186,150,0) 70%);
}
:is(html,body).is-dark body[data-view='month'] .p-weekbar{ background:linear-gradient(180deg,#0f1b2a 0%,#0a2230 100%); border-color:#2a4e6c; }
:is(html,body).is-dark body[data-view='month'] .p-weekbar .p-wday{ color:#a8c9ea; }
:is(html,body).is-dark body[data-view='month'] .p-cell{ border-color:#2f4f74; background:var(--month-cell-bg); box-shadow:0 3px 16px rgba(4,10,20,.65); }
:is(html,body).is-dark body[data-view='month'] .p-cell__num{ color:#e6f0ff; }
:is(html,body).is-dark body[data-view='month'] .p-monthhead .p-monthtitle{ color:#eaf2ff; text-shadow:0 1px 0 rgba(0,0,0,.35); }
:is(html,body).is-dark body[data-view='month'] .p-count{ background:var(--task-pill-bg, #FFE067); border:1px solid var(--task-pill-border, #f3c340); color:#0f172a; box-shadow:0 0 0 3px var(--month-cell-bg), 0 4px 12px rgba(0,0,0,.55); }
:is(html,body).is-dark body[data-view='month'] .p-count:not(.has){ background:#0f172a; border-color:#334155; color:#e5eefc; }
:is(html,body).is-dark body[data-view='month'] .p-cell--today::after{ box-shadow:0 0 0 var(--month-ring-thickness) #ff6a55 inset; }

:is(html,body).is-dark body[data-view='week'] .w-left{ color:#eaf2ff; text-shadow:0 1px 0 rgba(0,0,0,.35); }
:is(html,body).is-dark body[data-view='week'] .w-right{ color:#b9c9ef; text-shadow:0 1px 0 rgba(0,0,0,.35); }
:is(html,body).is-dark body[data-view='week'] .w-dayrow--today .w-rowhead{
  border:2px solid transparent;
  background:
    linear-gradient(var(--card, #161a22), var(--card, #161a22)) padding-box,
    conic-gradient(from 0deg, #f7d05a, #e0b33a, #cfa22a, #e0b33a, #f7d05a) border-box;
}

/* Profile blocks */
:is(html,body).is-dark body[data-view='profile'] .topbar .title{ color:var(--title); text-shadow:0 1px 0 rgba(0,0,0,.25); }
:is(html,body).is-dark body[data-view='profile'] .pp-count{ background:linear-gradient(180deg,#0f172a,#111827); }
:is(html,body).is-dark body[data-view='profile'] .pp-count b{ color:#f1f5f9; }
:is(html,body).is-dark body[data-view='profile'] .pp-count span{ color:#cbd5e1; }
:is(html,body).is-dark body[data-view='profile'] .pp-socialbar{
  border-color:#3A2A1E; background:linear-gradient(180deg,#231911,#1B1611); box-shadow:0 8px 18px rgba(0,0,0,.45);
}
:is(html,body).is-dark body[data-view='profile'] .pp-socbtn{ color:#FFE067; transition: color .16s ease, background .16s ease, transform .12s ease; }
:is(html,body).is-dark body[data-view='profile'] .pp-socbtn + .pp-socbtn{ border-inline-start-color:#3A2A1E; }
:is(html,body).is-dark body[data-view='profile'] .pp-socbtn:hover,
:is(html,body).is-dark body[data-view='profile'] .pp-socbtn:focus-visible{ color:#FFF2A6; background:linear-gradient(180deg,#2A2119,#1C1712); }
:is(html,body).is-dark body[data-view="profile"] .pp-editbtn{
  background: linear-gradient(180deg,#0f172a,#111827);
  color: #f1f5f9; border-color:#2f3b55; box-shadow:0 6px 12px rgba(0,0,0,.5);
}

/* Category cards (your snippet) */
body.dark, [data-theme="dark"]{
  --cat-btn-bg:#27C64A; --cat-btn-fg:#04160A; --cat-btn-ring:rgba(39,198,74,.35);
  --cat-card-bg:#0b1220; --cat-card-fg:#e6edf6; --cat-card-line:rgba(148,163,184,.16);
  --cat-card-glow:rgba(39,198,74,.20);
}

/* month-view */
/* ========== MONTH (dark) ========== */
/* parent already has .is-dark on html/body in your setup */
:is(html,body).is-dark body[data-view='month'] {

  /* the card itself */
  .p-monthcard {
    position: relative;
    width: min(100%, 390px);
    margin-inline: auto;
    padding: 10px 0 10px;
    border-radius: 22px;
    box-sizing: border-box;
    isolation: isolate;

    /* base dark wash (blue / greenish / midnight) */
    background:
      linear-gradient(180deg,
        #0b1722 0%,
        #0b1f2a 45%,
        #08121a 100%);
    border: 1px solid rgba(136, 178, 214, .12);
    box-shadow: 0 12px 28px rgba(0,0,0,.65);
  }

  /* STROKES: under the cells, low opacity */
  .p-monthcard::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    pointer-events: none;
    z-index: 0; /* <-- stays under everything inside */
    /* three soft swipes in night colors */
    background:
      linear-gradient(125deg,
        rgba(0,159,183,.25) 0 18%, transparent 18% 38%,
        rgba(240,191,70,.16) 38% 54%, transparent 54% 78%),
      linear-gradient(195deg,
        rgba(69,111,167,.22) 0 30%, transparent 30% 65%);
    opacity: .85; /* tweak here if you want even softer */
  }

  /* every child sits ABOVE the strokes */
  .p-monthcard > * {
    position: relative;
    z-index: 1;
  }

  /* weekday bar stays readable */
  .p-weekbar {
    background: rgba(5,10,16,.55);
    border: 1px solid rgba(165,194,220,.10);
    backdrop-filter: blur(6px);
    .p-wday { color: #b6cae4; }
  }

  /* cells: dark glass, above strokes */
  .p-cell {
    background: rgba(6, 11, 17, .9);
    border: 1px solid rgba(156,193,222,.16);
    box-shadow: 0 3px 12px rgba(0,0,0,.4);
  }

  .p-cell--dim {
    background: rgba(6, 11, 17, .35);
    border-style: dashed;
  }

  /* counter still bright gold */
  .p-count {
    background: #FFE067;
    border: 1px solid #f3c340;
    color: #0f172a;
    box-shadow:
      0 0 0 3px rgba(6, 11, 17, 1),
      0 5px 14px rgba(0,0,0,.5);
  }

  .p-cell--today::after {
    box-shadow: 0 0 0 3px #56c5ff inset;
  }

  .p-monthtitle {
    color: #f7f2de;
  }
}
