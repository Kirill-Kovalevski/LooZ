/* Day & Week share the same task card */
@use '../core/tokens' as *;

:root{
  --pill-ok-bg: #eaf6d6;
  --pill-ok-fg: #1b5e20;      /* green-ish */
  --pill-no-bg: #ffe1db;
  --pill-no-fg: #b71c1c;      /* tomato-ish */
  --task-bg: rgba(255,255,255,.9);
  --task-bd: #e3ecff;
  --task-shadow: 0 8px 24px rgba(15,23,42,.08);
}
:is(html,body).is-dark{
  --pill-ok-bg: #3e3412;      /* deeper gold-ish */
  --pill-ok-fg: #f0d574;      /* gold */
  --pill-no-bg: #3a1511;      /* red-gold base */
  --pill-no-fg: #ffb3a2;      /* red-gold text */
  --task-bg: rgba(18,22,34,.92);
  --task-bd: #2a365a;
  --task-shadow: 0 10px 28px rgba(0,0,0,.45);
}

/* Shell slot width harmony */
body[data-view="day"] .p-dayview{
  margin: 0 auto;
  max-inline-size: var(--phone-w, 390px);
  padding: .5rem .75rem 1rem;
}

/* Date ribbon at top of day */
.p-day-head{
  display: flex;
  justify-content: center;
  margin-block: .2rem .6rem;
  .p-day-when{
    font: 700 14px/1.2 'Rubik', system-ui, sans-serif;
    color: #0f172a;
    background: linear-gradient(180deg,#ffffff80,#ffffff40);
    border: 1px solid var(--task-bd);
    border-radius: 10px;
    padding: .35rem .6rem;
    box-shadow: 0 2px 8px rgba(15,23,42,.06);
  }
}

/* List wrapper */
.p-tasklist{
  display: grid;
  gap: .5rem;
}

/* Unified task card used by Day and Week */
.p-datask{
  --h: 54px;                 /* CONSISTENT HEIGHT */
  display: grid;
  grid-template-columns: 56px 1fr 64px;  /* time | title | actions */
  align-items: center;
  min-block-size: var(--h);
  border: 1px solid var(--task-bd);
  background: var(--task-bg);
  border-radius: 14px;
  padding: .5rem .5rem;
  box-shadow: var(--task-shadow);
  backdrop-filter: saturate(110%) blur(2px);
}

.p-datask.is-done .p-title{
  text-decoration: line-through;
  opacity: .65;
}

.p-time{
  justify-self: start;
  font: 600 12px/1 'Rubik', system-ui, sans-serif;
  color: #334155;
  inline-size: 44px;
  text-align: left;
}

.p-body .p-title{
  font: 600 15px/1.2 'Rubik', system-ui, sans-serif;
  color: #0f172a;
}

.p-actions{
  display: grid; grid-auto-flow: column; gap: .4rem; justify-content: end;
}
.p-act{
  min-inline-size: 34px;
  inline-size: 34px; block-size: 30px;
  border-radius: 999px;
  display: grid; place-items: center;
  font: 800 14px/1 system-ui;
  border: 1px solid transparent;
  box-shadow: 0 2px 6px rgba(15,23,42,.08);
}
.p-act--ok{
  background: var(--pill-ok-bg);
  color: var(--pill-ok-fg);
  border-color: color-mix(in oklch, var(--pill-ok-fg), white 70%);
}
.p-act--no{
  background: var(--pill-no-bg);
  color: var(--pill-no-fg);
  border-color: color-mix(in oklch, var(--pill-no-fg), white 70%);
}

/* Empty state */
.p-empty{
  border: 1px dashed var(--task-bd);
  border-radius: 12px;
  padding: .9rem .8rem;
  text-align: center;
  color:#445;
  background: linear-gradient(180deg, #ffffff8c, #ffffff52);
}
/* remove the tiny “day when” label */
.p-day-when { display: none !important; }
/* Task counter pill — reads CSS vars provided by Settings */
.p-count{
  position:absolute; top:-14px; left:50%; translate:-50% 0;
  inline-size:24px; block-size:24px; border-radius:999px;
  display:grid; place-items:center;
  font:800 12px/1 'Rubik', system-ui, sans-serif;
  background: var(--task-pill-bg);
  border: 1px solid var(--task-pill-border);
  color:#0f172a; box-shadow:0 3px 8px rgba(15,23,42,.08);
  pointer-events:none; opacity:.92;
}
.p-count:not(.has){ opacity:.45; }
/* wherever your pill styles are */
.p-count, .task-counter{
  background: var(--task-pill-bg);
  border: 1px solid var(--task-pill-border);
}
