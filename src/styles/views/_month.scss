/* Month view — square cells with top counter badge.
   Numbers are perfectly centered; the badge floats above. */

@use '../core/tokens' as *;

body[data-view='month'] {
  /* wrapper card */
  .p-monthview {
    max-inline-size: var(--phone-w, 390px);
    margin-inline: auto;
    padding: .75rem .75rem 1rem;
    border-radius: 18px;
    background:
      linear-gradient(180deg, rgba(255,255,255,.86), rgba(247,249,255,.80)),
      radial-gradient(120% 120% at 50% 0%, rgba(205,225,255,.22) 0%, rgba(255,255,255,0) 70%);
    box-shadow:
      0 6px 26px rgba(15,23,42,.10),
      inset 0 1px 0 rgba(255,255,255,.65);
  }

  /* Caption row: prev | Month YYYY | next */
  .p-monthhead{
    display:flex; align-items:center; justify-content:space-between;
    gap:.5rem; margin-block: .25rem .5rem;
    padding-inline:.25rem;
    .p-monthtitle{
      font: 800 16px/1.2 'Rubik', system-ui, sans-serif;
      color:#0f172a;
      letter-spacing:.3px;
    }
    .p-navbtn{
      inline-size:36px; block-size:36px; border-radius:999px;
      display:grid; place-items:center;
      border:1px solid #dbe6ff; background:#fff;
      box-shadow:0 3px 10px rgba(15,23,42,.06);
      font:800 18px/1 system-ui;
      color:#0f172a;
    }
  }

  /* One-piece weekday bar */
  .p-weekbar{
    display:grid; grid-template-columns:repeat(7,1fr);
    text-align:center; margin-bottom:.6rem;
    background:rgba(255,255,255,.8);
    border:1px solid #e6eeff; border-radius:14px;
    padding:.50rem .35rem;
    direction: rtl; /* Sunday at right for Hebrew */
    .p-wday{
      font:700 11px/1.1 system-ui, sans-serif;
      color:#64748b;
    }
  }

  /* Grid of dates */
  .p-monthgrid{
    display:grid; grid-template-columns:repeat(7,1fr);
    gap:.55rem; direction: rtl;  /* Sunday first */
  }

  /* Date cell */
  .p-cell{
    position:relative;
    display:grid; place-items:center; /* number is dead center */
    aspect-ratio:1 / 1;
    border-radius:16px;
    border:1px solid #dbe6ff;
    background:rgba(255,255,255,.88);
    box-shadow:0 3px 10px rgba(15,23,42,.06);
    transition: box-shadow .12s ease, transform .08s ease, border-color .12s ease;
  }

  .p-cell__num{
    font:800 18px/1 'Rubik', system-ui, sans-serif;
    color:#0f172a;
    translate:0 2px; /* subtle optical centering */
  }

  /* Small counter badge – half outside at the top center */
  .p-count{
    position:absolute; top:-12px; left:50%; translate:-50% 0;
    inline-size:24px; block-size:24px; border-radius:999px;
    display:grid; place-items:center;
    font:800 12px/1 'Rubik', system-ui, sans-serif;
    border:1px solid #b9ccf7; background:#eef4ff; color:#0f172a;
    box-shadow:0 3px 8px rgba(15,23,42,.08);
    pointer-events:none;
  }

  .p-cell--today{ outline:2px solid tomato; outline-offset:-2px; }

  /* Dim out filler days from prev/next months if you keep them */
  .p-cell--dim { opacity:.45; }

  /* Responsive: allow a little more room on web */
  @media (min-width: 480px){
    .p-monthview{ max-inline-size: 460px; }
  }
}

/* Dark mode */
:is(html,body).is-dark body[data-view='month']{
  .p-monthview{
    background:
      linear-gradient(180deg, rgba(16,20,34,.88), rgba(14,18,30,.84)),
      radial-gradient(120% 120% at 50% 0%, rgba(40,58,75,.45) 0%, rgba(0,0,0,0) 70%);
    box-shadow:0 10px 26px rgba(11,18,34,.5);
  }
  .p-monthhead .p-monthtitle{ color:#e6edff; }
  .p-monthhead .p-navbtn{
    border-color:#314a72; background:#121a2a; color:#e6edff;
    box-shadow:0 3px 14px rgba(6,10,22,.55);
  }
  .p-weekbar{
    background:linear-gradient(180deg,#0f172a,#0b1220);
    border-color:#304469;
    .p-wday{ color:#9bb7df; }
  }
  .p-cell{
    border-color:#354a7a; background:rgba(16,24,40,.88);
    box-shadow:0 3px 14px rgba(6,10,22,.55);
  }
  .p-cell__num{ color:#e6edff; }
  .p-count{
    border-color:#7a6b29;
    background:linear-gradient(180deg,#162235,#101827);
    color:#eed36e;
  }
  .p-cell--today{ outline:2px solid #d4af37; }
}
