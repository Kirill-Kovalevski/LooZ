/* WEEK — same bottom breathing as month, but slimmer day cards */

body[data-view="week"] {

  /* week view lives inside the scrollable #viewRoot — we don’t want extra bottom
     padding here, otherwise you have to scroll to see the floor */
  .o-viewroot {
    padding-bottom: 0;
  }

  /* main week container: make it a column and force it to fill the screen
     below the shell (header + buttons). 248px is the shell height in your layout. */
  .p-weekwrap {
    direction: rtl;
    margin: 0 auto;
    max-inline-size: var(--phone-w, 390px);
    padding-inline: 16px;
    box-sizing: border-box;

    min-height: calc(100vh - 248px);
    display: flex;
    flex-direction: column;
    gap: .5rem; /* a bit tighter between days */
  }

  /* list of day rows */
  .w-list {
    list-style: none;
    margin: 0;
    padding: 0;
    display: grid;
    gap: .5rem; /* match container gap */
  }

  /* day row */
  .w-dayrow {
    margin: 0;
  }

  /* the visible “lego” floor — always shown because it’s inside flex height */
  .w-bottomlego {
    flex: 0 0 auto;
    block-size: calc(22px + env(safe-area-inset-bottom, 0px));
  }

  /* cards — slimmer */
  .w-rowhead {
    width: 100%;
    min-height: 48px;          /* was 56px */
    padding: 8px 12px;          /* was 10px 12px */
    border-radius: 16px;
    background: var(--card, #fff);
    border: 1px solid color-mix(in oklab, var(--card,#fff) 70%, #b9ccf7);
    box-shadow: var(--card-shadow, 0 1px 3px rgba(0,0,0,.06));
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    align-items: center;
    column-gap: .75rem;
    cursor: pointer;
    position: relative;
    overflow: hidden;
    isolation: isolate;
    box-sizing: border-box;
  }

  .w-left  { justify-self: start; font: 800 13px/1 'Rubik', system-ui; color: var(--ink,#0f172a); }
  .w-right { justify-self: end;   font: 700 12px/1 'Rubik', system-ui; color: color-mix(in oklab, var(--ink,#0f172a) 65%, #7c879a); }

  .w-count {
    justify-self: center;
    inline-size: 30px;          /* was 32px */
    block-size: 30px;
    display: grid;
    place-items: center;
    border-radius: 999px;
    font: 800 12px/1 'Rubik', system-ui; /* a bit smaller */
    background: var(--task-pill-bg,#FFE067);
    border: 1px solid var(--task-pill-border,#f3c340);
    color: #0f172a;
    box-shadow: 0 3px 8px rgba(15,23,42,.08);
  }

  /* today ring */
  .w-dayrow--today .w-rowhead {
    border: 2px solid transparent;
    background:
      linear-gradient(var(--card,#fff), var(--card,#fff)) padding-box,
      conic-gradient(from 0deg,#9ae6b4,#60a5fa,#c084fc,#f6ad55,#f87171,#9ae6b4) border-box;
  }

  /* expand area — keep as-is */
  .w-detail {
    overflow: hidden;
    max-height: 0;
    transition: max-height .25s ease;
    padding-top: .45rem;
  }
  .w-detail[hidden] { display: block; }
  .w-dayrow.is-open .w-detail { max-height: 999px; }

  .p-dayview { margin: 0; }
  .p-tasklist > .p-datask { margin-bottom: .5rem; }

  /* pastel stripes per day (your original cycle) */
  .w-rowhead::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    background: var(--w-grad,
      linear-gradient(135deg, rgba(255,183,197,.28), rgba(197,225,250,.28))
    );
    z-index: 0;
    pointer-events: none;
  }
  .w-dayrow:nth-child(7n+1) .w-rowhead { --w-grad: linear-gradient(135deg, rgba(255,183,197,.28), rgba(197,225,250,.28)); }
  .w-dayrow:nth-child(7n+2) .w-rowhead { --w-grad: linear-gradient(135deg, rgba(186,230,253,.26), rgba(186,247,212,.26)); }
  .w-dayrow:nth-child(7n+3) .w-rowhead { --w-grad: linear-gradient(135deg, rgba(221,214,254,.28), rgba(199,210,254,.22)); }
  .w-dayrow:nth-child(7n+4) .w-rowhead { --w-grad: linear-gradient(135deg, rgba(255,228,181,.26), rgba(255,209,220,.26)); }
  .w-dayrow:nth-child(7n+5) .w-rowhead { --w-grad: linear-gradient(135deg, rgba(187,247,208,.26), rgba(167,243,208,.22)); }
  .w-dayrow:nth-child(7n+6) .w-rowhead { --w-grad: linear-gradient(135deg, rgba(255,245,199,.26), rgba(191,219,254,.22)); }
  .w-dayrow:nth-child(7n+7) .w-rowhead { --w-grad: linear-gradient(135deg, rgba(248,212,255,.26), rgba(186,230,253,.22)); }

  /* slightly bigger on bigger screens, but still slimmer than before */
  @media (min-width: 480px) {
    .w-rowhead { min-height: 52px; padding: 10px 14px; }
    .w-count   { inline-size: 32px; block-size: 32px; }
  }

  @media (min-width: 768px) {
    .p-weekwrap { max-inline-size: 540px; }
    .w-rowhead  { min-height: 56px; padding: 12px 16px; }
    .w-count    { inline-size: 34px; block-size: 34px; }
  }
}
/* somewhere in _week.scss */
.w-card {
  background: var(--week-card-bg, #f9fafb);
  border: 1px solid var(--week-card-border, #e5e7eb);
}
