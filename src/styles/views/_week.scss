/* Week view — minimal, phone-first */
/* assumes your Day task styles (.p-datask, .p-tasklist, etc.) already exist */

body[data-view="week"] {
  /* container width matches the shell */
  .p-weekwrap {
    direction: rtl;
    margin: .75rem auto 1rem;
    max-inline-size: var(--phone-w, 390px);
    padding: .25rem .25rem .5rem;
  }

  /* list of rows */
  .w-list {
    list-style: none;
    margin: 0;
    padding: 0;
    display: grid;
    gap: .6rem;
  }

  /* a single day row */
  .w-dayrow { margin: 0; }

  /* full-width header: [heb day | counter | date] */
  .w-rowhead {
    width: 100%;
    min-height: 56px;                /* match your Day card height */
    padding: 10px 12px;
    border-radius: 16px;
    background: var(--card, #fff);
    border: 1px solid color-mix(in oklab, var(--card, #fff) 70%, #b9ccf7);
    box-shadow: var(--card-shadow, 0 1px 3px rgba(0,0,0,.06));
    display: grid;
    grid-template-columns: 1fr auto 1fr;  /* left | center | right */
    align-items: center;
    column-gap: .75rem;
    cursor: pointer;
  }

  .w-left  { justify-self: start; font: 800 14px/1 'Rubik', system-ui; color: var(--ink, #0f172a); }
  .w-right { justify-self: end;   font: 700 12px/1 'Rubik', system-ui; color: color-mix(in oklab, var(--ink,#0f172a) 65%, #7c879a); }

  .w-count {
    justify-self: center;
    inline-size: 32px; block-size: 32px;
    display: grid; place-items: center;
    border-radius: 999px;
    font: 800 13px/1 'Rubik', system-ui;
    background: var(--pill, #eef4ff);
    border: 1px solid color-mix(in oklab, var(--pill,#eef4ff) 70%, #b9ccf7);
    color: var(--ink, #0f172a);
  }

  /* today = gradient border only */
  .w-dayrow--today .w-rowhead {
    border: 2px solid transparent;
    background:
      linear-gradient(var(--card, #fff), var(--card, #fff)) padding-box,
      conic-gradient(from 0deg, #9ae6b4, #60a5fa, #c084fc, #f6ad55, #f87171, #9ae6b4) border-box;
  }

  /* expanding panel under the header */
  .w-detail {
    overflow: hidden;
    max-height: 0;                 /* closed */
    transition: max-height .25s ease;
    padding-top: .5rem;
  }
  .w-detail[hidden] { display: block; }  /* JS controls height */
  .w-dayrow.is-open .w-detail { max-height: 999px; } /* safe cap */

  /* use the exact Day-view cards */
  .p-dayview { margin: 0; }
  .p-tasklist > .p-datask { margin-bottom: .5rem; }
}

/* Dark mode (minimal) */
:root[data-theme="dark"] {
  body[data-view="week"] {
    .w-rowhead {
      background: var(--card, #161a22);
      border-color: #3b4a72;
      box-shadow: var(--card-shadow, 0 1px 3px rgba(0,0,0,.45));
      color: var(--ink, #e5e9f5);
    }
    .w-right { color: #a3b0d9; }
    .w-count { background: #1f2430; border-color: #36456a; color: #eeda88; }
    .w-dayrow--today .w-rowhead {
      background:
        linear-gradient(var(--card, #161a22), var(--card, #161a22)) padding-box,
        conic-gradient(from 0deg, #d4af37, #34d399, #60a5fa, #d4af37) border-box;
    }
  }
}

/* Small responsive bumps */
@media (min-width: 480px) {
  body[data-view="week"] .w-rowhead { min-height: 60px; padding: 12px 14px; }
  body[data-view="week"] .w-count   { inline-size: 34px; block-size: 34px; }
}
@media (min-width: 768px) {
  body[data-view="week"] .p-weekwrap { max-inline-size: 540px; }
  body[data-view="week"] .w-rowhead  { min-height: 64px; padding: 14px 16px; }
  body[data-view="week"] .w-count    { inline-size: 36px; block-size: 36px; }
}
/* Pastel, semi-transparent inner gradients for week rows */
body[data-view="week"] {
  .w-rowhead {
    position: relative;
    overflow: hidden;           /* keep gradient clipped to rounded corners */
    isolation: isolate;         /* ensure pseudo z-index works consistently */
  }
  .w-rowhead > * {              /* keep text/icons above the gradient */
    position: relative;
    z-index: 1;
  }
  .w-rowhead::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    background: var(--w-grad, linear-gradient(135deg,
      rgba(255, 183, 197, .28), rgba(197, 225, 250, .28)
    ));
    z-index: 0;                 /* under content, above base background */
    pointer-events: none;
  }

  /* 7 soft hue sets (Sun..Sat) — tweak alphas if you want stronger/weaker */
  .w-dayrow:nth-child(7n+1) .w-rowhead { --w-grad:
    linear-gradient(135deg, rgba(255,183,197,.28), rgba(197,225,250,.28)); } /* rose → sky */
  .w-dayrow:nth-child(7n+2) .w-rowhead { --w-grad:
    linear-gradient(135deg, rgba(186,230,253,.26), rgba(186,247,212,.26)); } /* light sky → mint */
  .w-dayrow:nth-child(7n+3) .w-rowhead { --w-grad:
    linear-gradient(135deg, rgba(221,214,254,.28), rgba(199,210,254,.22)); } /* violet → indigo */
  .w-dayrow:nth-child(7n+4) .w-rowhead { --w-grad:
    linear-gradient(135deg, rgba(255,228,181,.26), rgba(255,209,220,.26)); } /* peach → blush */
  .w-dayrow:nth-child(7n+5) .w-rowhead { --w-grad:
    linear-gradient(135deg, rgba(187,247,208,.26), rgba(167,243,208,.22)); } /* mint → aqua */
  .w-dayrow:nth-child(7n+6) .w-rowhead { --w-grad:
    linear-gradient(135deg, rgba(255,245,199,.26), rgba(191,219,254,.22)); } /* butter → light blue */
  .w-dayrow:nth-child(7n+7) .w-rowhead { --w-grad:
    linear-gradient(135deg, rgba(248,212,255,.26), rgba(186,230,253,.22)); } /* lilac → sky */
}

/* Dark mode: slightly increase opacity so it still pops */
:root[data-theme="dark"] body[data-view="week"] {
  .w-rowhead::before { opacity: .45; }
}
