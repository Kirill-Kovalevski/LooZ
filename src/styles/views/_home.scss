/* HOME SHELL (RTL). Tuned for iPhone 12 Pro (390px) and responsive up. */
html, body { height: 100%; }
body { min-height: 100vh; }

/* tokens */
:root{
  --chrome-bg:#fff;
  --chrome-fg:#0f172a;
  --chrome-border:#e5e7eb;
  --chrome-shadow:0 6px 16px rgba(15,23,42,.10);

  --btn-shadow-rest:   0 2px 8px rgba(15,23,42,.08);
  --btn-shadow-hover:  0 8px 22px rgba(15,23,42,.14);
  --btn-shadow-active: 0 3px 10px rgba(15,23,42,.22);

  --ease: cubic-bezier(.2,.8,.2,1);
}
:is(html,body).is-dark{
  --chrome-bg:#0f172a;
  --chrome-fg:#e6edff;
  --chrome-border:#334155;
  --chrome-shadow:0 10px 22px rgba(0,0,0,.45);

  --btn-shadow-rest:   0 2px 10px rgba(0,0,0,.30);
  --btn-shadow-hover:  0 10px 26px rgba(0,0,0,.42);
  --btn-shadow-active: 0 4px 12px rgba(0,0,0,.55);
}

/* ===== App background: classy pastel splashes ===== */
.o-page{
  position: relative;
  min-height: 100vh;
  display: grid;
  place-items: center;
  /* base wash – very subtle so content is readable */
  background:
    linear-gradient(180deg, #f8fafc 0%, #eef2f9 100%);
  overflow: hidden;            /* hide splash edges on small screens */
  isolation: isolate;          /* keep blends inside the page */
}

/* Static broad blobs (very light) */
.o-page::before{
  content: "";
  position: fixed;             /* covers viewport; doesn’t scroll */
  inset: -15vmax;              /* bleed beyond edges to avoid crop on zoom */
  z-index: -1;
  pointer-events: none;

  /* pastel “splashes” using layered radial gradients */
  background:
    /* warm peach at top-left */
    radial-gradient(28vmax 22vmax at 8% 6%,
      rgba(255, 209, 170, .45) 0%,
      rgba(255, 209, 170, .18) 48%,
      rgba(255, 209, 170, 0) 62%),

    /* mango/banana sweep upper-center */
    radial-gradient(26vmax 20vmax at 48% -8%,
      rgba(255, 235, 170, .40) 0%,
      rgba(255, 235, 170, .16) 50%,
      rgba(255, 235, 170, 0) 65%),

    /* sky blue at top-right */
    radial-gradient(28vmax 22vmax at 95% 4%,
      rgba(184, 214, 255, .42) 0%,
      rgba(184, 214, 255, .18) 48%,
      rgba(184, 214, 255, 0) 62%),

    /* mint bottom-left */
    radial-gradient(26vmax 22vmax at -6% 86%,
      rgba(188, 244, 220, .40) 0%,
      rgba(188, 244, 220, .16) 50%,
      rgba(188, 244, 220, 0) 66%),

    /* lavender bottom-right */
    radial-gradient(30vmax 24vmax at 102% 92%,
      rgba(210, 190, 255, .42) 0%,
      rgba(210, 190, 255, .18) 50%,
      rgba(210, 190, 255, 0) 66%),

    /* soft coral accent near lower middle */
    radial-gradient(18vmax 14vmax at 58% 78%,
      rgba(255, 185, 178, .40) 0%,
      rgba(255, 185, 178, .12) 55%,
      rgba(255, 185, 178, 0) 70%);
  filter: blur(10px) saturate(105%);   /* creamy, not neon */
  opacity: .85;
  will-change: transform;              /* mobile perf hint */
}

/* Gentle drifting highlight blobs (barely moving) */
.o-page::after{
  content: "";
  position: fixed;
  inset: -20vmax;
  z-index: -1;
  pointer-events: none;

  background:
    radial-gradient(16vmax 14vmax at 22% 28%, rgba(255, 230, 190, .55) 0%, rgba(255, 230, 190, 0) 70%),
    radial-gradient(14vmax 12vmax at 80% 26%, rgba(200, 218, 255, .50) 0%, rgba(200, 218, 255, 0) 70%),
    radial-gradient(18vmax 16vmax at 76% 82%, rgba(226, 208, 255, .48) 0%, rgba(226, 208, 255, 0) 70%),
    radial-gradient(14vmax 12vmax at 28% 84%, rgba(255, 210, 190, .48) 0%, rgba(255, 210, 190, 0) 70%);
  filter: blur(24px);
  opacity: .65;
  animation: splash-drift 28s ease-in-out infinite alternate;
}

@keyframes splash-drift{
  0%   { transform: translate3d(0,0,0) scale(1.00); }
  50%  { transform: translate3d(1.2%, -1.2%, 0) scale(1.02); }
  100% { transform: translate3d(-1.2%, 1.2%, 0) scale(1.01); }
}

@media (prefers-reduced-motion: reduce){
  .o-page::after{ animation: none; }
}

/* Dark mode – keep it pastel, just deeper */
:is(html,body).is-dark .o-page{
  background: linear-gradient(180deg, #0f1422 0%, #0b111d 100%);
}
:is(html,body).is-dark .o-page::before{
  background:
    radial-gradient(28vmax 22vmax at 8% 6%,   rgba(255, 209, 170, .28) 0%, rgba(255, 209, 170, 0) 62%),
    radial-gradient(26vmax 20vmax at 48% -8%, rgba(255, 235, 170, .24) 0%, rgba(255, 235, 170, 0) 65%),
    radial-gradient(28vmax 22vmax at 95% 4%,  rgba(184, 214, 255, .26) 0%, rgba(184, 214, 255, 0) 62%),
    radial-gradient(26vmax 22vmax at -6% 86%,  rgba(188, 244, 220, .22) 0%, rgba(188, 244, 220, 0) 66%),
    radial-gradient(30vmax 24vmax at 102% 92%, rgba(210, 190, 255, .24) 0%, rgba(210, 190, 255, 0) 66%),
    radial-gradient(18vmax 14vmax at 58% 78%,  rgba(255, 185, 178, .22) 0%, rgba(255, 185, 178, 0) 70%);
  opacity: .75;
}
:is(html,body).is-dark .o-page::after{
  opacity: .55;
}


/* phone shell */
.o-phone{
  inline-size: var(--phone-w, 390px);
  min-height: 100vh;
  display: grid;
  grid-template-rows: auto auto auto auto auto 1fr auto;
  gap: .75rem;
  padding: .75rem .75rem 1rem;
  direction: rtl;
}

/* header */
.o-header{ display:grid; grid-template-columns:1fr auto 1fr; align-items:center; }
.looz-logo{ display:grid; place-items:center; inline-size:120px; margin-inline:auto; background:transparent; }
.brand-logo{ inline-size:100%; height:auto; display:none; }
.brand-logo--light{ display:block; }
:is(html,body).is-dark .brand-logo--light{ display:none; }
:is(html,body).is-dark .brand-logo--dark{ display:block; }

/* universal button motion */
:where(button,.c-topbtn,.c-headbtn,.c-pillnav,.c-cta,.p-act,.p-dact){
  transition: transform .12s var(--ease), box-shadow .14s var(--ease), background-color .14s var(--ease), border-color .14s var(--ease), opacity .14s var(--ease);
  box-shadow: var(--btn-shadow-rest);
  will-change: transform;
}
:where(button,.c-topbtn,.c-headbtn,.c-pillnav,.c-cta,.p-act,.p-dact):hover{ box-shadow: var(--btn-shadow-hover); transform: translateY(-1px); }
:where(button,.c-topbtn,.c-headbtn,.c-pillnav,.c-cta,.p-act,.p-dact):active{ box-shadow: var(--btn-shadow-active); transform: translateY(1px) scale(.98); }
:where(button,.c-topbtn,.c-headbtn,.c-pillnav,.c-cta,.p-act,.p-dact):focus-visible{ outline:2px solid color-mix(in oklab, #60a5fa 70%, transparent); outline-offset:2px; }

/* top chrome */
.c-topbtn{
  inline-size:44px; block-size:44px; border-radius:50%;
  display:grid; place-items:center;
  border:1px solid var(--chrome-border);
  background:var(--chrome-bg); color:var(--chrome-fg);
  box-shadow: var(--chrome-shadow);
}
.c-topbtn--profile{ justify-self:start; }
.c-topbtn--settings{ justify-self:end; }

/* lemon + dock (centered for 390px and up) */
.c-lemon-area{
  position: relative;
  inline-size: 100%;
  display: grid; place-items: center;
}

.c-lemonbtn{
  inline-size:48px; block-size:48px; border-radius:999px;
  background:#fff0bc; border:1px solid #ffd97a;
  display:grid; place-items:center; padding:0;
  box-shadow: 0 1px 0 rgba(255,255,255,.7), 0 14px 30px rgba(250,186,60,.30);
}
.c-lemonbtn__svg{ inline-size:40px; block-size:40px; display:block; }

.c-dock{
  position:absolute;
  inset-block-start: calc(100% + 10px);
  inset-inline: 0;                 /* left & right = 0 */
  margin-inline: auto;             /* centers the dock regardless of RTL */
  inline-size: min(340px, calc(100% - 24px)); /* perfect on iPhone 12 Pro */
  block-size: 56px;
  border-radius: 999px;

  display:grid;
  grid-template-columns: 56px 1fr 56px;
  align-items:center; gap:.5rem; padding:.5rem;

  background: linear-gradient(180deg,#ffffff,#f7f9ff);
  border:1px solid #e7edff;
  box-shadow: 0 16px 40px rgba(15,23,42,.14);

  opacity:0; pointer-events:none; transform: translateY(-6px);
  transition: opacity .18s var(--ease), transform .18s var(--ease);
}
.c-dock.is-open{ opacity:1; pointer-events:auto; transform: translateY(0); }

.c-dock__side{
  inline-size:56px; block-size:44px; display:grid; place-items:center;
  border-radius:999px; background:#fff; border:1px solid #e8eefc;
  box-shadow: 0 4px 12px rgba(15,23,42,.08);
}
.c-dock__search{
  block-size:44px; border-radius:999px; display:grid; align-items:center;
  background:#f5f8ff; border:1px solid #e2eaff; box-shadow: inset 0 1px 0 rgba(255,255,255,.85);
  padding-inline:.9rem;
}
.c-dock__search input{
  inline-size:100%; block-size:100%; border:0; outline:0; background:transparent;
  text-align:right; font:600 14px/1 'Rubik', system-ui, sans-serif; color:#0f172a;
}
.c-dock__search input::placeholder{ color:#8aa0c6; }

/* meta */
.c-meta-block{ text-align:center; }
.c-date{  font: 800 15px/1.2 'Rubik', system-ui, sans-serif; color:#0f172a; }
.c-greet{ margin-top:.25rem; font:700 16px/1.4 'Rubik', system-ui, sans-serif; color:#334155; }
.c-greet b{ color:#0f172a; }

/* view switch */
.c-view-switch{ display:flex; gap:.75rem; justify-content:center; margin:.5rem auto 0; }
.c-headbtn{
  min-width:84px; height:44px; padding:0 18px; border-radius:999px;
  border:1px solid #e5edff; background:#fff; color:#0f172a;
  display:grid; place-items:center; font:800 15px/1 'Rubik', system-ui, sans-serif;
}
.c-headbtn.is-active{
  background:#FFE067; border-color:#f8d24c;
  box-shadow: 0 6px 18px rgba(248,210,76,.35), inset 0 1px 0 rgba(255,255,255,.55);
}

/* mini period nav */
.c-period-mini{
  display:flex; align-items:center; justify-content:space-between;
  gap:.75rem; margin:.35rem auto .25rem; max-inline-size: var(--phone-w, 390px);
}
.c-pillnav{
  inline-size:52px; block-size:36px; border-radius:999px;
  display:grid; place-items:center; border:1px solid #e5e7eb;
  background:#fff; color:#0f172a; font:800 14px/1 'Rubik', system-ui;
}

/* content area */
.o-viewroot{ min-block-size:420px; display:block; -webkit-overflow-scrolling:touch; scrollbar-width:none; }
.o-viewroot::-webkit-scrollbar{ width:0; height:0; }

/* orb */
.c-orb-spacer{ block-size:120px; }
.c-bottom-cta{
  position:fixed; left:50%; transform:translateX(-50%) translateY(12px);
  bottom:max(16px, env(safe-area-inset-bottom)); z-index:100;
  opacity:0; pointer-events:none; transition: opacity .18s var(--ease), transform .18s var(--ease);
}
.c-bottom-cta.is-visible{ opacity:1; transform:translateX(-50%) translateY(0); pointer-events:auto; }

/* dark mode details */
:is(html,body).is-dark .c-date{ color:#e6edff; }
:is(html,body).is-dark .c-greet{ color:#b4c5ff; }
:is(html,body).is-dark .c-greet b{ color:#fff; }
:is(html,body).is-dark{
  .c-lemonbtn{ border-color:#f1c95f; box-shadow:0 16px 38px rgba(0,0,0,.45); }
  .c-dock{ background:linear-gradient(180deg,#121826,#0f1422); border-color:#35446b; box-shadow:0 22px 48px rgba(0,0,0,.50); }
  .c-dock__side{ background:#111827; border-color:#334155; color:#e6edff; box-shadow:0 10px 18px rgba(0,0,0,.5); }
  .c-dock__search{ background:#0b1222; border-color:#2a3552; }
  .c-dock__search input{ color:#e6edff; }
  .c-dock__search input::placeholder{ color:#8596c2; }
}

/* responsive (larger phones & tablets) */
@media (min-width: 430px){
  .c-dock{ inline-size: min(380px, calc(100% - 32px)); }
}
/* Lemon mark polish */
.c-lemonbtn__svg {
  display: block;
  inline-size: 40px; /* already set earlier; keeps it filling the button nicely */
  block-size: 40px;
  filter: drop-shadow(0 1px 0 rgba(255,255,255,.6)) drop-shadow(0 2px 6px rgba(250,186,60,.25));
}

:is(html,body).is-dark .c-lemonbtn__svg {
  filter: drop-shadow(0 1px 0 rgba(0,0,0,.25)) drop-shadow(0 4px 10px rgba(0,0,0,.45));
}
/* Make it obvious the lemon is clickable */
.c-lemonbtn {
  cursor: pointer;
  z-index: 21; /* above the dock so it always captures taps */
  /* subtle “on” state */
  &.is-on {
    transform: translateY(-1px);
    box-shadow:
      0 1px 0 rgba(255,255,255,.7),
      0 18px 38px rgba(250,186,60,.36);
  }
}

/* Keep the lemon area centering the dock for iPhone 12 Pro and up */
.c-lemon-area {
  position: relative;
  display: grid;
  place-items: center;
  inline-size: 100%;
}

/* Overlaid dock — centered to the phone, not the icon */
.c-dock {
  position: absolute;
  inset-inline-start: 50%;
  transform: translateX(-50%) translateY(-6px);
  inset-block-start: calc(100% + 10px);
  inline-size: min(92%, 360px);
  block-size: 56px;
  z-index: 20;

  display: grid;
  grid-template-columns: 56px 1fr 56px;
  align-items: center;
  gap: .5rem;
  padding: .5rem;

  border-radius: 999px;
  background: linear-gradient(180deg,#ffffff,#f7f9ff);
  border: 1px solid #e7edff;
  box-shadow: 0 16px 40px rgba(15,23,42,.14);

  opacity: 0;
  pointer-events: none;
  transition: opacity .18s ease, transform .18s ease;

  &.is-open {
    opacity: 1;
    pointer-events: auto;
    transform: translateX(-50%) translateY(0);
  }
}

.c-dock__side {
  inline-size: 56px; block-size: 44px;
  display: grid; place-items: center;
  border-radius: 999px;
  background:#fff; border:1px solid #e8eefc;
  box-shadow: 0 4px 12px rgba(15,23,42,.08);
}

/* Centered search field */
.c-dock__search {
  block-size: 44px;
  border-radius: 999px;
  display: grid; align-items: center;
  background: #f5f8ff;
  border: 1px solid #e2eaff;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.85);
  padding-inline: .9rem;

  input {
    inline-size: 100%;
    block-size: 100%;
    border: 0; outline: 0; background: transparent;
    text-align: right;
    font: 600 14px/1 'Rubik', system-ui, sans-serif;
    color: #0f172a;

    &::placeholder { color: #8aa0c6; }
  }
}

/* Dark mode keeps the same behavior */
:is(html,body).is-dark .c-dock {
  background: linear-gradient(180deg,#121826,#0f1422);
  border-color:#35446b;
  box-shadow: 0 22px 48px rgba(0,0,0,.50);
}
:is(html,body).is-dark .c-dock__side {
  background:#111827; border-color:#334155; color:#e6edff;
  box-shadow: 0 10px 18px rgba(0,0,0,.5);
}
:is(html,body).is-dark .c-dock__search {
  background:#0b1222; border-color:#2a3552;
  input { color:#e6edff; &::placeholder{ color:#8596c2; } }
}
/* ---- FIX: iPhone 12 Pro alignment + center the lemon dock ---- */

/* Phone shell: center & clamp width (iPhone 12 Pro logical width is 390px) */
.o-phone{
  inline-size: clamp(320px, 100vw, 390px);
  margin-inline: auto;
}

/* Lemon row must span full phone width so the dock can center to it */
.c-lemon-area{
  position: relative;
  display: grid;
  place-items: center;
  inline-size: 100%;
}

/* Center the dock by using logical insets + auto margins (works in RTL/LTR) */
.c-dock{
  position: absolute;
  /* place the dock under the lemon */
  inset-block-start: calc(100% + 10px);

  /* TRUE CENTERING: stretch logical insets to the edges of the parent
     and then center the fixed-size dock with auto margins */
  inset-inline: 0;                     /* replaces left/right for RTL safety */
  margin-inline: auto;

  /* width: a max cap + small gutters on very narrow screens */
  inline-size: min(360px, calc(100% - 24px));

  /* only translate on Y (no X centering anymore) */
  transform: translateY(-6px);
}
.c-dock.is-open{
  transform: translateY(0);
}

/* Make sure the lemon button itself is perfectly centered in its row */
.c-lemonbtn{ margin: 0 auto; }

/* Responsive touch-ups */
@media (min-width: 390px){
  /* Slightly wider dock once we hit iPhone 12 Pro width */
  .c-dock{ inline-size: min(380px, calc(100% - 24px)); }
}

@media (min-width: 430px){
  /* For larger phones, give the dock some breathing room */
  .c-dock{ inline-size: 400px; }
}
