/* ===================== GLOBAL TOKENS / HOME SHELL ===================== */
html, body { height: 100%; }
body { min-height: 100vh; }

:root{
  /* chrome + motion */
  --chrome-bg:#fff;
  --chrome-fg:#0f172a;
  --chrome-border:#e5e7eb;
  --chrome-shadow:0 6px 16px rgba(15,23,42,.10);

  --btn-shadow-rest:   0 2px 8px rgba(15,23,42,.08);
  --btn-shadow-hover:  0 8px 22px rgba(15,23,42,.14);
  --btn-shadow-active: 0 3px 10px rgba(15,23,42,.22);

  --ease: cubic-bezier(.2,.8,.2,1);

  /* seasonal splash defaults (JS overrides per month via setSeasonTheme) */
  --s1: hsl(150 60% 84%);  /* mint */
  --s2: hsl(205 85% 86%);  /* sky   */
  --s3: hsl(265 70% 88%);  /* lilac */
  --s4: hsl(35  95% 87%);  /* peach */
  --s5: hsl(355 70% 86%);  /* coral */

  /* nav accent for header icons (matches yellow buttons + lemon vibe) */
  --nav-accent:#FFE067;
  --nav-accent-br:#f3c340;
  --nav-accent-ink:#0f172a;
  --nav-glow: 0 10px 26px rgba(255,224,103,.55), 0 0 0 1px rgba(243,195,64,.55) inset;
  --nav-ambient: radial-gradient(40% 40% at 50% 50%, rgba(255,224,103,.65), transparent 60%);
}

/* dark-mode tokens */
:is(html,body).is-dark{
  --chrome-bg:#0f172a;
  --chrome-fg:#e6edff;
  --chrome-border:#334155;
  --chrome-shadow:0 10px 22px rgba(0,0,0,.45);

  --btn-shadow-rest:   0 2px 10px rgba(0,0,0,.30);
  --btn-shadow-hover:  0 10px 26px rgba(0,0,0,.42);
  --btn-shadow-active: 0 4px 12px rgba(0,0,0,.55);

  /* dark keeps same yellow, adjusts glow */
  --nav-accent:#FFE067;
  --nav-accent-br:#f3c340;
  --nav-accent-ink:#0b1220;
  --nav-glow: 0 14px 36px rgba(255,224,103,.70), 0 0 0 1px rgba(255,239,170,.35) inset;
}

/* ===================== APP BACKGROUND (pastel, seasonal) ===================== */
.o-page{
  position: relative;
  min-height: 100vh;
  display: grid;
  place-items: center;

  background:
    linear-gradient(180deg, #f8fafc 0%, #eef2f9 32%, #eef2f9 100%) padding-box,
    radial-gradient(26vmax 20vmax at 12% 55%, color-mix(in oklab, var(--s4) 36%, transparent) 0%, color-mix(in oklab, var(--s4) 16%, transparent) 45%, transparent 70%),
    radial-gradient(28vmax 22vmax at 88% 52%, color-mix(in oklab, var(--s2) 36%, transparent) 0%, color-mix(in oklab, var(--s2) 16%, transparent) 48%, transparent 72%),
    radial-gradient(32vmax 24vmax at 50% 88%, color-mix(in oklab, var(--s3) 32%, transparent) 0%, color-mix(in oklab, var(--s3) 14%, transparent) 50%, transparent 74%),
    radial-gradient(22vmax 18vmax at 22% 92%, color-mix(in oklab, var(--s1) 28%, transparent) 0%, color-mix(in oklab, var(--s1) 12%, transparent) 52%, transparent 76%),
    radial-gradient(22vmax 18vmax at 78% 94%, color-mix(in oklab, var(--s5) 28%, transparent) 0%, color-mix(in oklab, var(--s5) 12%, transparent) 52%, transparent 76%);
  background-repeat: no-repeat;

  overflow: hidden;
  isolation: isolate;
  transition: background 240ms ease;
}

:is(html,body).is-dark .o-page{
  background:
    linear-gradient(180deg, #0f1422 0%, #0b111d 32%, #0b111d 100%) padding-box,
    radial-gradient(26vmax 20vmax at 12% 55%, color-mix(in oklab, var(--s4) 18%, transparent) 0%, transparent 70%),
    radial-gradient(28vmax 22vmax at 88% 52%, color-mix(in oklab, var(--s2) 18%, transparent) 0%, transparent 72%),
    radial-gradient(32vmax 24vmax at 50% 88%, color-mix(in oklab, var(--s3) 16%, transparent) 0%, transparent 74%),
    radial-gradient(22vmax 18vmax at 22% 92%, color-mix(in oklab, var(--s1) 14%, transparent) 0%, transparent 76%),
    radial-gradient(22vmax 18vmax at 78% 94%, color-mix(in oklab, var(--s5) 14%, transparent) 0%, transparent 76%);
}

/* drifting ambiance */
.o-page::after{
  content:"";
  position: fixed;
  inset: -12vmax;
  z-index: -1;
  pointer-events: none;
  background:
    radial-gradient(16vmax 14vmax at 35% 66%, color-mix(in oklab, var(--s4) 40%, transparent) 0%, transparent 70%),
    radial-gradient(14vmax 12vmax at 65% 70%, color-mix(in oklab, var(--s2) 38%, transparent) 0%, transparent 70%);
  filter: blur(22px);
  opacity: .55;
  animation: splash-drift 32s ease-in-out infinite alternate;
}
@media (prefers-reduced-motion: reduce){
  .o-page::after{ animation: none; }
}
@keyframes splash-drift{
  0%   { transform: translate3d(0,2%,0) scale(1.00); }
  50%  { transform: translate3d(1%,0,0)  scale(1.01); }
  100% { transform: translate3d(-1%,1%,0) scale(1.01); }
}

/* ===================== PHONE SHELL GRID ===================== */
.o-phone{
  inline-size: clamp(320px, 100vw, 390px); /* iPhone 12 Pro logical width = 390 */
  margin-inline: auto;

  min-height: 100vh;

  display: grid;
  grid-template-rows:
    auto   /* header */
    auto   /* lemon/dock */
    auto   /* date/greet */
    auto   /* view switch */
    auto   /* mini period nav */
    1fr    /* #viewRoot / .o-viewroot scroll container */
    auto;  /* orb spacer + floating orb */

  gap: .75rem;
  padding: .75rem .75rem 1rem;
  direction: rtl;
  box-sizing: border-box;
}

/* ===================== HEADER ===================== */
.o-header{
  display:grid;
  grid-template-columns:1fr auto 1fr;
  align-items:center;
}

.looz-logo{
  display:grid;
  place-items:center;
  inline-size:120px;
  margin-inline:auto;
}
.brand-logo{
  inline-size:100%;
  height:auto;
  display:none;
}
.brand-logo--light{ display:block; }
:is(html,body).is-dark .brand-logo--light{ display:none; }
:is(html,body).is-dark .brand-logo--dark{ display:block; }

/* ===== HEADER ICON BUTTONS (accent yellow) ===== */
.c-topbtn{
  inline-size:44px;
  block-size:44px;
  border-radius:50%;
  display:grid;
  place-items:center;
  border:1px solid var(--chrome-border);
  background:var(--chrome-bg);
  color:var(--chrome-fg);
  box-shadow: var(--chrome-shadow);
}

/* we elevate profile & settings with lemon-golden accent */
.c-topbtn--profile,
.c-topbtn--settings{
  position:relative;
  isolation:isolate;
  background: var(--nav-accent);
  border-color: var(--nav-accent-br);
  color: var(--nav-accent-ink);
  box-shadow: var(--nav-glow);
}
.c-topbtn--profile::after,
.c-topbtn--settings::after{
  content:"";
  position:absolute;
  inset:-18px;
  z-index:-1;
  pointer-events:none;
  background: var(--nav-ambient);
  filter: blur(10px);
  opacity:.85;
}
.c-topbtn--profile{ justify-self:start; }
.c-topbtn--settings{ justify-self:end; }
.c-topbtn svg{ width:20px; height:20px; fill: currentColor; }

/* ===================== UNIVERSAL BUTTON MOTION ===================== */
:where(button,.c-topbtn,.c-headbtn,.c-pillnav,.c-cta,.p-act,.p-dact){
  transition:
    transform .12s var(--ease),
    box-shadow .14s var(--ease),
    background-color .14s var(--ease),
    border-color .14s var(--ease),
    opacity .14s var(--ease);
  box-shadow: var(--btn-shadow-rest);
  will-change: transform;
}
:where(button,.c-topbtn,.c-headbtn,.c-pillnav,.c-cta,.p-act,.p-dact):hover{
  box-shadow: var(--btn-shadow-hover);
  transform: translateY(-1px);
}
:where(button,.c-topbtn,.c-headbtn,.c-pillnav,.c-cta,.p-act,.p-dact):active{
  box-shadow: var(--btn-shadow-active);
  transform: translateY(1px) scale(.98);
}
:where(button,.c-topbtn,.c-headbtn,.c-pillnav,.c-cta,.p-act,.p-dact):focus-visible{
  outline:2px solid color-mix(in oklab, #60a5fa 70%, transparent);
  outline-offset:2px;
}

/* ===================== LEMON + DOCK ===================== */
.c-lemon-area{
  position: relative;
  inline-size: 100%;
  display: grid;
  place-items: center;
  margin-bottom: -0.65rem; /* pull date closer to the lemon */
}

.c-lemonbtn{
  /* bigger than header buttons for a “main toggle” feel */
  inline-size:59px;
  block-size:59px;
  border-radius:999px;

  background: transparent;
  border: 0;
  padding: 0;
  cursor:pointer;

  display:grid;
  place-items:center;

  box-shadow: none;
  z-index: 21; /* above dock */
}

.c-lemonbtn__mask,
.c-lemonbtn__inner{
  inline-size: 100%;
  block-size: 100%;
  border-radius: inherit;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
}

/* lemon graphic fills the button */
.c-lemonbtn__img {
  width: 100%;
  height: 100%;
  max-width: 100%;
  max-height: 100%;
  display: block;
  object-fit: contain;
}

/* small motion when "on" (JS toggles class) */
.c-lemonbtn.is-on{
  transform: translateY(-1px);
}

:is(html,body).is-dark .c-lemonbtn__img{
  filter:
    drop-shadow(0 1px 0 rgba(0,0,0,.25))
    drop-shadow(0 4px 10px rgba(0,0,0,.45));
}

/* Centered dock (RTL/LTR safe) */
.c-dock{
  position: absolute;
  inset-block-start: calc(100% + 10px);
  inset-inline: 0;
  margin-inline: auto;
  inline-size: min(360px, calc(100% - 24px));
  block-size: 56px;
  z-index: 20;

  display:grid;
  grid-template-columns: 56px 1fr 56px;
  align-items:center;
  gap:.5rem;
  padding:.5rem;

  border-radius: 999px;
  background: linear-gradient(180deg,#ffffff,#f7f9ff);
  border:1px solid #e7edff;
  box-shadow: 0 16px 40px rgba(15,23,42,.14);

  opacity:0;
  pointer-events:none;
  transform: translateY(-6px);
  transition: opacity .18s var(--ease), transform .18s var(--ease);

  overflow: visible; /* let results dropdown escape */
}
.c-dock.is-open{
  opacity:1;
  pointer-events:auto;
  transform: translateY(0);
}

.c-dock__side{
  inline-size:56px;
  block-size:44px;
  display:grid;
  place-items:center;
  border-radius:999px;
  background:#fff;
  border:1px solid #e8eefc;
  box-shadow: 0 4px 12px rgba(15,23,42,.08);
}

.c-dock__search{
  block-size:44px;
  border-radius:999px;
  display:grid;
  align-items:center;
  background:#f5f8ff;
  border:1px solid #e2eaff;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.85);
  padding-inline:.9rem;
}
.c-dock__search input{
  inline-size:100%;
  block-size:100%;
  border:0;
  outline:0;
  background:transparent;
  text-align:right;
  font:600 14px/1 'Rubik', system-ui, sans-serif;
  color:#0f172a;
}
.c-dock__search input::placeholder{
  color:#8aa0c6;
}

/* dark dock */
:is(html,body).is-dark .c-dock{
  background: linear-gradient(180deg,#121826,#0f1422);
  border-color:#35446b;
  box-shadow: 0 22px 48px rgba(0,0,0,.50);
}
:is(html,body).is-dark .c-dock__side{
  background:#111827;
  border-color:#334155;
  color:#e6edff;
  box-shadow: 0 10px 18px rgba(0,0,0,.5);
}
:is(html,body).is-dark .c-dock__search{
  background:#0b1222;
  border-color:#2a3552;
}
:is(html,body).is-dark .c-dock__search input{
  color:#e6edff;
}
:is(html,body).is-dark .c-dock__search input::placeholder{
  color:#8596c2;
}

/* search results dropdown */
.c-dock__results{
  position: absolute;
  left: 0;
  right: 0;
  top: 100%;
  margin-top: 4px;
  max-height: 220px;
  overflow-y: auto;
  background: #ffffff;
  border-radius: 9999px;
  padding: 6px 8px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.12);
  z-index: 40;
}

.c-dock__result{
  width: 100%;
  border: 0;
  background: transparent;
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 4px 6px;
  border-radius: 9999px;
  cursor: pointer;
  text-align: right;
}

.c-dock__result:hover,
.c-dock__result:focus-visible{
  outline: none;
  background: rgba(247, 209, 89, 0.12);
}

.c-dock__avatar{
  width: 28px;
  height: 28px;
  border-radius: 9999px;
  overflow: hidden;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f5f5f5;
}
.c-dock__avatar img{
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}
.c-dock__avatar-fallback{
  font-size: .8rem;
  font-weight: 700;
  color: #226F54;
}

.c-dock__meta{
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 2px;
}
.c-dock__name{
  font-size: .85rem;
  font-weight: 700;
  color: #226F54;
}
.c-dock__username{
  font-size: .75rem;
  color: #568EA3;
}
.c-dock__empty{
  font-size: .8rem;
  color: #777;
  padding: 4px 6px;
  text-align: center;
}

/* ===================== META (date + greeting) ===================== */
.c-meta-block{
  text-align:center;
  margin-top: 0; /* JS adds a tiny positive margin, this keeps it snug */
}

/* date */
.c-date{
  text-align:center;
  font: 800 15px/1.2 'Rubik', system-ui, sans-serif;
  color:#0f172a;
}
:is(html,body).is-dark .c-date{ color:#e6edff; }

/* layout for the two date lines */
.c-datewrap { display: inline-grid; gap: 2px; }
.c-date__primary{
  font-weight: 800;
  font-size: clamp(18px, 2.7vw, 19px);
  line-height: 1.15;
}
.c-date__hebrew{
  font-weight: 700;
  font-size: clamp(14px, 2.2vw, 16px);
  line-height: 1.15;
  opacity: .95;
}

/* greeting – first line (ברוכים השבים, + name) */
.c-greet{
  margin: .10rem 0 0;
  font: 800 .92rem/1.2 'Rubik', system-ui, sans-serif;
  color:#568EA3;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:.35rem;

  /* keep to ONE line */
  max-width: 100%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* dark-mode color for the label (name itself is styled separately) */
:is(html,body).is-dark .c-greet{
  color:#b4c5ff;
}

/* name container (second part of first line) */
.c-greet-name{
  position:relative;
  display:inline-flex;
  gap:.30rem;
  align-items:center;
  font-weight:800;
}

/* multi-color name text */
.c-greet-nameinner{
  font-weight: 800;
  background: linear-gradient(
    90deg,
    #facc15,
    #f97316,
    #22c55e,
    #38bdf8
  );
  background-size: 220% 100%;
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent !important;
  animation: nameGradientFlow 6s ease-in-out infinite alternate;
}

/* subtle gradient shimmer */
@keyframes nameGradientFlow{
  0%   { background-position: 0% 50%; }
  100% { background-position: 100% 50%; }
}

/* second greeting line */
.c-subgreet{
  margin: .16rem 0 0;
  font-size: .82rem;
  line-height: 1.25;
  color:#568EA3;

  /* keep to ONE line → total 2 lines for greeting block */
  max-width: 100%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
:is(html,body).is-dark .c-subgreet{
  color:#b4c5ff;
}

/* ===================== VIEW SWITCH + PERIOD NAV ===================== */
.c-view-switch{
  display:flex;
  gap:.75rem;
  justify-content:center;
  margin:.5rem auto 0;
}
.c-headbtn{
  min-width:84px;
  height:44px;
  padding:0 18px;
  border-radius:999px;
  border:1px solid #e5edff;
  background:#fff;
  color:#0f172a;
  display:grid;
  place-items:center;
  font:800 15px/1 'Rubik', system-ui, sans-serif;
}
.c-headbtn.is-active{
  background:#FFE067;
  border-color:#f8d24c;
  box-shadow:
    0 6px 18px rgba(248,210,76,.35),
    inset 0 1px 0 rgba(255,255,255,.55);
}

.c-period-mini{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:.75rem;
  margin:.35rem auto .25rem;
  max-inline-size: 390px;
}
.c-pillnav{
  inline-size:52px;
  block-size:36px;
  border-radius:999px;
  display:grid;
  place-items:center;
  border:1px solid #e5e7eb;
  background:#fff;
  color:#0f172a;
  font:800 14px/1 'Rubik', system-ui;
}

/* ===================== SCROLL CONTAINER / VIEW ROOT ===================== */
.o-viewroot,
#viewRoot {
  position: relative;
  display: block;

  inline-size: 100%;
  max-inline-size: 390px;
  margin-inline: auto;

  min-block-size: 0;
  max-block-size: 100%;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;

  padding-inline: clamp(8px, 2vw, 12px);
  padding-block-end: calc(88px + env(safe-area-inset-bottom, 0px));

  scroll-padding-bottom: calc(140px + env(safe-area-inset-bottom, 0px));
}
.o-viewroot::-webkit-scrollbar,
#viewRoot::-webkit-scrollbar {
  width:0;
  height:0;
}

/* ===================== ORB ===================== */
.c-orb-spacer{
  block-size:120px;
}
.c-bottom-cta{
  position:fixed;
  left:50%;
  bottom:max(16px, env(safe-area-inset-bottom));
  transform:translateX(-50%) translateY(12px);
  z-index:100;

  opacity:0;
  pointer-events:none;
  transition: opacity .18s var(--ease), transform .18s var(--ease);
}
.c-bottom-cta.is-visible{
  opacity:1;
  transform:translateX(-50%) translateY(0);
  pointer-events:auto;
}

/* ===================== RESPONSIVE BUMPS ===================== */
@media (min-width: 390px){
  .c-dock{ inline-size: min(380px, calc(100% - 24px)); }
}
@media (min-width: 430px){
  .c-dock{ inline-size: 400px; }
}

/* last-name initial dot in greeting */
.lname-initial::after{
  content: ".";
}
